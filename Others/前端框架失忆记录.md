# 前端框架失忆记录 -- 零散点 

### easyUi

常用功能：
* `$.message.alert()`  参数有：title , contentTxt , 'info/error/warning' 
* `var a = $('#tabs').tabs('getTab','tabTitle'); a.panel('refresh');`  面板刷新：先获取tab再刷新tab对应的面板
* `var tab = $('#tabs').tabs('getSelected');  $('#tabs').tabs('getTabIndex',tab);`  先获取选中的标签，再获取到它的标签索引
* `var tab = $('#tabs').tabs('select',title)`  选中某一个标签
* `var tab = $('#tabs').tabs('exist',title);`  判断是否存在该标签 
*  新增标签：
``` javascript
$('#tabs').tabs('add',{
  title:'',
  content:'',
  closable:true
})
```

### jQuery
常见api:
* 表单中的参数提交序列化 `$('#form').serializeArray()` 或 `$('#form').serialize()`  
通过遍历数组，新增一个对象赋值，再使用异步发送参数:
  ```javascript
  $.each(arr,function(item){
     obj[item.name] = item.value;
  })
  ```
* 通过元素属性获取DOM元素  `$("td[name='']")[index]` 
* 从`$('#id').attr()`获取属性为boolean之后，得到的是一个字符串。此时，if("false")为true，因为condition是非控制，因此需要if(xx == 'true')
* 使用`$.ajax({})`传参数时，如果`data{ id : xx }`，xx为null，此时没有向请求发送字段和字段值。必须显式赋值null，才能传送。 

### 原生JavaScript
* 表单重置 `document.getElementById().reset()` //对表单有效
* `for (.. in obj)` 不能对数组进行遍历，否则会读取原型属性，多遍历一个项，即length + 1; 建议用for(x of arr)
* 轮询可以通过setTimeout以及setInterval来发送请求

### 兼容性问题
* `for (.. in obj)` 不能对数组使用，否则会读取原型属性，多遍历一个项，即length + 1，PC浏览器不会出现+1，但IOS或者安卓等不支持ES6的可能出现问题
* `window.onpopstate`    
  每当活动历史记录条目在同一文档的两个历史记录条目之间发生变化时，就会将事件分派到窗口。  
  浏览器操作历史记录的前进/后退触发或者history.back();  
  > 可能在当前页面触发，触发条件应该为瞄点引起的页面跳转
  ```javascript
  window.onpopstate=function(event){
    event.state  //返回pageId,id号,url
  }
  ```
  > 浏览器兼容性问题（IOS版的微信，是会立即触发popstate事件）：监听微信的返回按钮，存在这样一个问题："当页面被加载的时候，popstate会立即被触发"。而根据官方文档对popstate的描述，只要访问历史记录就会触发popstate。而传统的History中访问页面和生产历史记录是同时的。
  由于我在项目前，先是监听该window事件，事件里绑定处理程序，然后再发送请求获取数据，导致数据在还没加载完毕时获取不了，报错undefined；
  ```javascript
  //错误演示Vue
  function aaa(){
    window.onpopstate=function(event){
      if(event.state){   //正常初始化时不会被触发，除非点击浏览器操作和IOS的
          console.log(vm.a);    //当触发后会响应式读取实例数据
       }
    }
  }
  function bbb(){
    $.ajax({})  //将this.a = data.xxx;
  }
  
  //避免以上情况，正确应该放在success成功后才去监听该事件。
  ```

### freeMarker语法
```
<#if></#if>
<#list xx as x>
<#assign aa="" >  // 注册页面同步变量
${}
//判空
${xx!}  ${xx!''}
<#if aa??>
//过滤器
<#if !numbers?seq_contain(number)>  //判断是否包含
<#if arr?size gt 0>

//转换同步数据为json
var a = '${jsonTool.toJSON(profile)}')
```


### Beetl语法
<%if( )%>


### 缓存问题
为了避免读取缓存中的静态文件，采用添加时间戳进行重新加载。

### 请求错误原因
* 404 不用说了吧
* 400 请求参数有误，检查参数字段
* 403 可能需要进行验证码
* 500 交给后台解决

### 解决http与https协议问题
访问chrome://net-internal/#hsts
删除对应想访问的目标域名


